<center>
  <img src="https://github.com/jameslnewell/tradie-v4/blob/separate-builder/docs/img/logo.png" height="40"/>
</center>

---

# @tradie/node-package-scripts

An opinionated set of scripts for creating and maintaining node packages.

Feel like you spend more time setting up, and updating the tools tools?`@tradie/node-package-scripts` lets you spend more time writing code and less time setting up, updating and maintaining the tools for your package. It provides you with a way to keep tooling consistent across multiple packages with minimal effort.

## Usage

```
mkdir my-package && cd my-package
npx --package @tradie/node-package-scripts tradie create
```

This will create a new project in the current directory.

## Files

```
  coverage/
  examples/
  lib/
  src/
  test/
  .flowconfig
  .gitignore
  package.json
```

### `coverage/`

This folder contains the coverage report generated by `tradie test --coverage`. This folder should be added to your `.gitignore` file. This folder is removed by `tradie clean`.

### `examples/`

This folder contains scripts that demonstrate the functionality of your package. These scripts can be run using the `tradie example <module>` command.

### `lib/`

This folder contains the transpiled sources generated by `tradie build`. This folder should be added to your `.gitignore` file. This folder is removed by `tradie clean`.

### `src/`

This folder contains the source code and the unit tests for your package.

### `test/`

This folder contains other tests e.g. integration etc

### `.flowconfig`

This file contains your config for `flowtype`. Typings are optional.

### `.gitignore`

This file excludes files from your version control system. It should at least exclude the generated files and folders. For example:

```
lib
coverage
node_modules
```

### `package.json`

This is your package manifest. You should specify your package's main script and which files will should be included in the package.

```json
{
  "main": "lib/index.js",
  "files": ["lib"]
}
```

## Commands

### `tradie clean`

Remove generated files and folders.

```
tradie clean [--watch] [--coverage]
```

### `tradie lint`

Lint sources, tests and examples.

```
tradie lint [--watch]
```

> This command doesn't enforce any stylistic rules. Use `prettier` instead.

### `tradie build`

Transpile sources and export their types.

```
tradie build [--watch]
```

### `tradie test`

Run tests.

```
tradie test [--watch] [--coverage]
```

### `tradie example`

Run examples.

```
tradie example <module>
```

## FAQ*

> *Questions that I think will be frequently asked.

### Can I use the latest language features?

Yes. The following `presets` and `plugins` are configured:

- `babel-preset-env`
- `babel-plugin-transform-class-properties`
- `babel-plugin-transform-object-rest-spread`
- `babel-plugin-transform-dynamic-import-node`

### What versions of node will my package support?

Your sources will be transpiled to support `>=4`. You can change the target node version by adding the `engines` key in your `package.json`. For example:

```json
{
  "engines": {
    "node": "v8"
  }
}
```

### Can I use types?

Yes! Create a `.flowconfig` and add `// @flow` comments to the top of your files. Type information will be exported to `./lib`.

You should ignore the `./lib` directory. For example:

`.flowconfig`:
```ini
[ignore]
.*/lib/.*
```

TODO:
- test test cmd
- test create cmd
- test example cmd
- test watchers
- require babel-polyfill in tests
